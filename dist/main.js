(()=>{"use strict";const t=t=>{localStorage.setItem("listOfProjects",JSON.stringify(t)),h()},e=t=>{localStorage.setItem("selectedProjectId",JSON.stringify(t)),h()},n=document.getElementById("new_project_input"),a=document.getElementById("project_form"),s=document.getElementById("data-projects"),d=document.getElementById("data-default-project"),l=document.getElementById("task_title"),i=document.getElementById("task_count"),o=document.getElementById("task_list"),c=document.getElementById("task_body"),r=document.getElementById("tasks"),m=document.getElementById("task_form"),u=document.getElementById("new_task_button"),p=document.getElementById("cancel_task_button"),g=document.getElementById("new_task_input"),y=document.getElementById("date"),k=document.getElementById("priority_dropdown");let f,E=[];d.addEventListener("click",(t=>{t.target.classList.add("active"),l.textContent="Default Project",i.textContent=null})),a.addEventListener("submit",(a=>{if(a.preventDefault(),null===n.value||""===n.value)return;const s=(d=n.value,{id:Date.now().toString(),item:d,tasks:[]});var d;n.value=null,E.push(s),t(E),e(f),v()})),m.addEventListener("submit",(n=>{n.preventDefault(),n.target.style.display="none",u.style.display="block";const a=g.value;if(null==a||""===a)return;const s=(d=a,{id:Date.now().toString(),item:d,date:y.value,priority:k.value,complete:!1});var d;g.value="",E.find((t=>t.id===f)).tasks.push(s),t(E),e(f),n.target.reset()}));const b=t=>{const e=t.tasks.filter((t=>!t.complete)).length;let n="";n=1===e?"task":"tasks",i.textContent=`${e} ${n} remaining`};s.addEventListener("click",(n=>{var a;f=n.target.getAttribute("data-key"),e(f),n.target.classList.contains("delete_project")&&(a=n.target.parentElement.getAttribute("data-key"),E=E.filter((t=>t.id!==a)),l.textContent="Select or Create a new project",i.textContent=null,t(E),d.classList.add("active"))})),o.addEventListener("click",(n=>{if("input"===n.target.tagName.toLowerCase()){const a=E.find((t=>t.id===f));a.tasks.find((t=>t.id===n.target.id)).complete=n.target.checked,t(E),e(f),b(a)}})),u.addEventListener("click",(t=>{t.target.style.display="none",m.style.display="block",r.appendChild(o)})),p.addEventListener("click",(()=>{m.style.display="none",u.style.display="block",m.reset()}));const v=()=>{(t=>{for(;t.childNodes[2];)t.removeChild(t.childNodes[2])})(s),(t=>{for(;t.firstChild;)t.removeChild(t.firstChild)})(c),E.forEach((t=>{const e=document.createElement("li");e.setAttribute("data-key",t.id),e.classList.add("new_project"),e.innerHTML=`${t.item} <button class="delete_project text-white bg-danger btn"><i class="fas fa-trash-alt"></i></button><br /><br />`,t.id===f&&(e.classList.add("active"),d.classList.remove("active")),s.appendChild(e)})),(()=>{const t=E.find((t=>t.id===f));f&&(l.textContent=t.item,b(t),t.tasks.forEach((t=>{const e=document.createElement("input");e.setAttribute("type","checkbox"),e.setAttribute("class","check_box"),e.id=t.id,e.checked=t.complete;const n=document.createElement("label");n.className="my-3 w-50",n.htmlFor=t.id,n.innerHTML=`<span class="font-weight-bold">Task Descrition:</span> ${t.item}<br/>\n        <span class="font-weight-bold">Task Date:</span> ${t.date}<br/> \n        <span class="font-weight-bold">Task Priority:</span> ${t.priority}`,n.appendChild(e),c.appendChild(n),o.appendChild(c)})))})()};(()=>{const t=localStorage.getItem("listOfProjects"),e=localStorage.getItem("selectedProjectId");t&&(E=JSON.parse(t),v()),e&&(f=JSON.parse(e),v())})();const h=v;h()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvY29sbGFiLy4vc3JjL21vZHVsZXMvbG9jYWxTdG9yYWdlLmpzIiwid2VicGFjazovL3RvZG9jb2xsYWIvLi9zcmMvbW9kdWxlcy9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG9jb2xsYWIvLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsiYWRkVG9Mb2NhbFN0b3JhZ2UiLCJsaXN0T2ZQcm9qZWN0cyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkU2VsZWN0ZWRQcm9qZWN0Iiwic2VsZWN0ZWRQcm9qZWN0SWQiLCJwcm9qZWN0SW5wdXQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwicHJvamVjdEZvcm0iLCJwcm9qZWN0TGlzdCIsImRlZmF1bHRQcm9qZWN0IiwidGFza1RpdGxlIiwidGFza0NvdW50ZXIiLCJ0YXNrTGlzdCIsInRhc2tEaXYiLCJ0YXNrQ29udGFpbmVyIiwidGFza0Zvcm0iLCJhZGRUYXNrQnRuIiwiY2FuY2VsVGFza0J0biIsInRhc2tJbnB1dCIsImR1ZURhdGUiLCJwcmlvcml0eSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwicHJvamVjdCIsIml0ZW0iLCJpZCIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInRhc2tzIiwicHVzaCIsImNyZWF0ZSIsInN0eWxlIiwiZGlzcGxheSIsInRhc2tOYW1lIiwidGFzayIsImRhdGUiLCJjb21wbGV0ZSIsImZpbmQiLCJyZXNldCIsImNyZWF0ZVRhc2tDb3VudCIsInNlbGVjdGVkUHJvamVjdCIsImluY29tcGxldGVUYXNrcyIsImZpbHRlciIsImxlbmd0aCIsInRhc2tNZXNzYWdlIiwiZ2V0QXR0cmlidXRlIiwiY29udGFpbnMiLCJwYXJlbnRFbGVtZW50IiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwiY2hlY2tlZCIsImFwcGVuZENoaWxkIiwiZWxlbWVudCIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImNsZWFyUHJvamVjdCIsImZpcnN0Q2hpbGQiLCJjbGVhclRhc2siLCJmb3JFYWNoIiwibmV3UHJvamVjdCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJyZW1vdmUiLCJ0YXNrQ2hlY2tCb3giLCJ0YXNrTGFiZWwiLCJjbGFzc05hbWUiLCJodG1sRm9yIiwiY3JlYXRlVGFza3MiLCJyZWZlcmVuY2UiLCJnZXRJdGVtIiwic2VsZWN0ZWQiLCJwYXJzZSIsImdldEZyb21Mb2NhbFN0b3JhZ2UiXSwibWFwcGluZ3MiOiJtQkFJQSxNQUFNQSxFQUFxQkMsSUFDekJDLGFBQWFDLFFBQVEsaUJBQWtCQyxLQUFLQyxVQUFVSixJQUN0RCxLQUlJSyxFQUFzQkMsSUFDMUJMLGFBQWFDLFFBQVEsb0JBQXFCQyxLQUFLQyxVQUFVRSxJQUN6RCxLQ1ZJQyxFQUFlQyxTQUFTQyxlQUFlLHFCQUN2Q0MsRUFBY0YsU0FBU0MsZUFBZSxnQkFDdENFLEVBQWNILFNBQVNDLGVBQWUsaUJBQ3RDRyxFQUFpQkosU0FBU0MsZUFBZSx3QkFDekNJLEVBQVlMLFNBQVNDLGVBQWUsY0FDcENLLEVBQWNOLFNBQVNDLGVBQWUsY0FDdENNLEVBQVdQLFNBQVNDLGVBQWUsYUFDbkNPLEVBQVVSLFNBQVNDLGVBQWUsYUFDbENRLEVBQWdCVCxTQUFTQyxlQUFlLFNBQ3hDUyxFQUFXVixTQUFTQyxlQUFlLGFBQ25DVSxFQUFhWCxTQUFTQyxlQUFlLG1CQUNyQ1csRUFBZ0JaLFNBQVNDLGVBQWUsc0JBQ3hDWSxFQUFZYixTQUFTQyxlQUFlLGtCQUNwQ2EsRUFBVWQsU0FBU0MsZUFBZSxRQUNsQ2MsRUFBV2YsU0FBU0MsZUFBZSxxQkFFekMsSUFFSUgsRUFGQU4sRUFBaUIsR0FLckJZLEVBQWVZLGlCQUFpQixTQUFVQyxJQUN4Q0EsRUFBRUMsT0FBT0MsVUFBVUMsSUFBSSxVQUN2QmYsRUFBVWdCLFlB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QVdFLGFBQWEsV0FBWXZDLEVBQVFFLElBQzVDbUMsRUFBVzFDLFVBQVVDLElBQUksZUFDekJ5QyxFQUFXRyxVQUFZLEdBQUd4QyxFQUFRQyxxSEFFOUJELEVBQVFFLEtBQU81QixJQUNqQitELEVBQVcxQyxVQUFVQyxJQUFJLFVBQ3pCaEIsRUFBZWUsVUFBVThDLE9BQU8sV0FFbEM5RCxFQUFZa0QsWUFBWVEsTUFpQlIsTUFDbEIsTUFBTW5CLEVBQWtCbEQsRUFBZStDLE1BQU1mLEdBQVlBLEVBQVFFLEtBQU81QixJQUVwRUEsSUFDRk8sRUFBVWdCLFlBQWNxQixFQUFnQmpCLEtBQ3hDZ0IsRUFBZ0JDLEdBRWhCQSxFQUFnQlosTUFBTThCLFNBQVN4QixJQUM3QixNQUFNOEIsRUFBZWxFLFNBQVM4RCxjQUFjLFNBQzVDSSxFQUFhSCxhQUFhLE9BQVEsWUFDbENHLEVBQWFILGFBQWEsUUFBUyxhQUNuQ0csRUFBYXhDLEdBQUtVLEVBQUtWLEdBQ3ZCd0MsRUFBYWQsUUFBVWhCLEVBQUtFLFNBQzVCLE1BQU02QixFQUFZbkUsU0FBUzhELGNBQWMsU0FDekNLLEVBQVVDLFVBQVksWUFDdEJELEVBQVVFLFFBQVVqQyxFQUFLVixHQUV6QnlDLEVBQVVILFVBQVksMERBQTBENUIsRUFBS1gsdUVBQ2hDVyxFQUFLQyw0RUFDREQsRUFBS3JCLFdBRTlEb0QsRUFBVWQsWUFBWWEsR0FDdEIxRCxFQUFRNkMsWUFBWWMsR0FDcEI1RCxFQUFTOEMsWUFBWTdDLFFBcUV6QjhELElBRzBCLE1BQzFCLE1BQU1DLEVBQVk5RSxhQUFhK0UsUUFBUSxrQkFDakNDLEVBQVdoRixhQUFhK0UsUUFBUSxxQkFFbENELElBQ0YvRSxFQUFpQkcsS0FBSytFLE1BQU1ILEdBQzVCdkMsS0FHRXlDLElBQ0YzRSxFQUFvQkgsS0FBSytFLE1BQU1ELEdBQy9CekMsTUFJSjJDLEdBRUEsVUN4TkEsSyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZSBmcm9tICcuL3Byb2plY3QnO1xuXG4vLyBMb2NhbCBzdG9yYWdlXG5cbmNvbnN0IGFkZFRvTG9jYWxTdG9yYWdlID0gKGxpc3RPZlByb2plY3RzKSA9PiB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsaXN0T2ZQcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KGxpc3RPZlByb2plY3RzKSk7XG4gIGNyZWF0ZSgpO1xufTtcblxuLy8gQWRkIHRoZSBzZWxlY3RlZCBwcm9qZWN0IHRvIGxvY2FsIHN0b3JhZ2VcbmNvbnN0IGFkZFNlbGVjdGVkUHJvamVjdCA9IChzZWxlY3RlZFByb2plY3RJZCkgPT4ge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2VsZWN0ZWRQcm9qZWN0SWQnLCBKU09OLnN0cmluZ2lmeShzZWxlY3RlZFByb2plY3RJZCkpO1xuICBjcmVhdGUoKTtcbn07XG5cbmV4cG9ydCB7XG4gIGFkZFRvTG9jYWxTdG9yYWdlLFxuICBhZGRTZWxlY3RlZFByb2plY3QsXG59OyIsImltcG9ydCB7IGFkZFRvTG9jYWxTdG9yYWdlLCBhZGRTZWxlY3RlZFByb2plY3QgfSBmcm9tICcuL2xvY2FsU3RvcmFnZSc7XG5cbmNvbnN0IHByb2plY3RJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdfcHJvamVjdF9pbnB1dCcpO1xuY29uc3QgcHJvamVjdEZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdF9mb3JtJyk7XG5jb25zdCBwcm9qZWN0TGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRhLXByb2plY3RzJyk7XG5jb25zdCBkZWZhdWx0UHJvamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRhLWRlZmF1bHQtcHJvamVjdCcpO1xuY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tfdGl0bGUnKTtcbmNvbnN0IHRhc2tDb3VudGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tfY291bnQnKTtcbmNvbnN0IHRhc2tMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tfbGlzdCcpO1xuY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrX2JvZHknKTtcbmNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza3MnKTtcbmNvbnN0IHRhc2tGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tfZm9ybScpO1xuY29uc3QgYWRkVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdfdGFza19idXR0b24nKTtcbmNvbnN0IGNhbmNlbFRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsX3Rhc2tfYnV0dG9uJyk7XG5jb25zdCB0YXNrSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3X3Rhc2tfaW5wdXQnKTtcbmNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpO1xuY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHlfZHJvcGRvd24nKTtcblxubGV0IGxpc3RPZlByb2plY3RzID0gW107XG5cbmxldCBzZWxlY3RlZFByb2plY3RJZDtcblxuLy8gVGhlIGRlZmF1bHQgcHJvamVjdCBpcyBhY3RpdmUgd2hlbiBjbGlja2VkXG5kZWZhdWx0UHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSAnRGVmYXVsdCBQcm9qZWN0JztcblxuICB0YXNrQ291bnRlci50ZXh0Q29udGVudCA9IG51bGw7XG59KTtcblxuLy8gQ3JlYXRlIGEgcHJvamVjdFxuY29uc3QgcHJvamVjdEl0ZW0gPSAoaXRlbSkgPT4gKHsgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSwgaXRlbSwgdGFza3M6IFtdIH0pO1xuXG4vLyBQcm9qZWN0IGZvcm1cbnByb2plY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBpZiAocHJvamVjdElucHV0LnZhbHVlID09PSBudWxsIHx8IHByb2plY3RJbnB1dC52YWx1ZSA9PT0gJycpIHJldHVybjtcblxuICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdEl0ZW0ocHJvamVjdElucHV0LnZhbHVlKTtcbiAgcHJvamVjdElucHV0LnZhbHVlID0gbnVsbDtcblxuICBsaXN0T2ZQcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuXG4gIGFkZFRvTG9jYWxTdG9yYWdlKGxpc3RPZlByb2plY3RzKTtcbiAgYWRkU2VsZWN0ZWRQcm9qZWN0KHNlbGVjdGVkUHJvamVjdElkKTtcblxuICBjcmVhdGUoKTtcbn0pO1xuXG4vLyBDcmVhdGUgcHJvamVjdCBpdGVtL3Rhc2tcbmNvbnN0IHRhc2tJdGVtID0gKGl0ZW0pID0+ICh7XG4gIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksIGl0ZW0sIGRhdGU6IGR1ZURhdGUudmFsdWUsIHByaW9yaXR5OiBwcmlvcml0eS52YWx1ZSwgY29tcGxldGU6IGZhbHNlLFxufSk7XG5cbi8vIFRhc2sgZm9ybVxudGFza0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBlLnRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBhZGRUYXNrQnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gIGNvbnN0IHRhc2tOYW1lID0gdGFza0lucHV0LnZhbHVlO1xuICBpZiAodGFza05hbWUgPT0gbnVsbCB8fCB0YXNrTmFtZSA9PT0gJycpIHJldHVybjtcblxuICBjb25zdCB0YXNrID0gdGFza0l0ZW0odGFza05hbWUpO1xuXG4gIHRhc2tJbnB1dC52YWx1ZSA9ICcnO1xuXG4gIGNvbnN0IHNlbGVjdGVkUHJvamVjdCA9IGxpc3RPZlByb2plY3RzLmZpbmQoKHByb2plY3QpID0+IHByb2plY3QuaWQgPT09IHNlbGVjdGVkUHJvamVjdElkKTtcbiAgc2VsZWN0ZWRQcm9qZWN0LnRhc2tzLnB1c2godGFzayk7XG5cbiAgYWRkVG9Mb2NhbFN0b3JhZ2UobGlzdE9mUHJvamVjdHMpO1xuICBhZGRTZWxlY3RlZFByb2plY3Qoc2VsZWN0ZWRQcm9qZWN0SWQpO1xuXG4gIGUudGFyZ2V0LnJlc2V0KCk7XG59KTtcblxuLy8gQ3JlYXRlIHByb2plY3RzXG5jb25zdCBjcmVhdGVQcm9qZWN0ID0gKCkgPT4ge1xuICBsaXN0T2ZQcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgY29uc3QgbmV3UHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgbmV3UHJvamVjdC5zZXRBdHRyaWJ1dGUoJ2RhdGEta2V5JywgcHJvamVjdC5pZCk7XG4gICAgbmV3UHJvamVjdC5jbGFzc0xpc3QuYWRkKCduZXdfcHJvamVjdCcpO1xuICAgIG5ld1Byb2plY3QuaW5uZXJIVE1MID0gYCR7cHJvamVjdC5pdGVtfSA8YnV0dG9uIGNsYXNzPVwiZGVsZXRlX3Byb2plY3QgdGV4dC13aGl0ZSBiZy1kYW5nZXIgYnRuXCI+PGkgY2xhc3M9XCJmYXMgZmEtdHJhc2gtYWx0XCI+PC9pPjwvYnV0dG9uPjxiciAvPjxiciAvPmA7XG5cbiAgICBpZiAocHJvamVjdC5pZCA9PT0gc2VsZWN0ZWRQcm9qZWN0SWQpIHtcbiAgICAgIG5ld1Byb2plY3QuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBkZWZhdWx0UHJvamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB9XG4gICAgcHJvamVjdExpc3QuYXBwZW5kQ2hpbGQobmV3UHJvamVjdCk7XG4gIH0pO1xufTtcblxuLy8gQ3JlYXRlIGEgdGFzayBjb3VudFxuY29uc3QgY3JlYXRlVGFza0NvdW50ID0gKHNlbGVjdGVkUHJvamVjdCkgPT4ge1xuICBjb25zdCBpbmNvbXBsZXRlVGFza3MgPSBzZWxlY3RlZFByb2plY3QudGFza3MuZmlsdGVyKCh0YXNrKSA9PiAhdGFzay5jb21wbGV0ZSkubGVuZ3RoO1xuICBsZXQgdGFza01lc3NhZ2UgPSAnJztcbiAgaWYgKGluY29tcGxldGVUYXNrcyA9PT0gMSkge1xuICAgIHRhc2tNZXNzYWdlID0gJ3Rhc2snO1xuICB9IGVsc2Uge1xuICAgIHRhc2tNZXNzYWdlID0gJ3Rhc2tzJztcbiAgfVxuXG4gIHRhc2tDb3VudGVyLnRleHRDb250ZW50ID0gYCR7aW5jb21wbGV0ZVRhc2tzfSAke3Rhc2tNZXNzYWdlfSByZW1haW5pbmdgO1xufTtcbi8vIENyZWF0ZSB0YXNrc1xuY29uc3QgY3JlYXRlVGFza3MgPSAoKSA9PiB7XG4gIGNvbnN0IHNlbGVjdGVkUHJvamVjdCA9IGxpc3RPZlByb2plY3RzLmZpbmQoKHByb2plY3QpID0+IHByb2plY3QuaWQgPT09IHNlbGVjdGVkUHJvamVjdElkKTtcblxuICBpZiAoc2VsZWN0ZWRQcm9qZWN0SWQpIHtcbiAgICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSBzZWxlY3RlZFByb2plY3QuaXRlbTtcbiAgICBjcmVhdGVUYXNrQ291bnQoc2VsZWN0ZWRQcm9qZWN0KTtcblxuICAgIHNlbGVjdGVkUHJvamVjdC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBjb25zdCB0YXNrQ2hlY2tCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgdGFza0NoZWNrQm94LnNldEF0dHJpYnV0ZSgndHlwZScsICdjaGVja2JveCcpO1xuICAgICAgdGFza0NoZWNrQm94LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY2hlY2tfYm94Jyk7XG4gICAgICB0YXNrQ2hlY2tCb3guaWQgPSB0YXNrLmlkO1xuICAgICAgdGFza0NoZWNrQm94LmNoZWNrZWQgPSB0YXNrLmNvbXBsZXRlO1xuICAgICAgY29uc3QgdGFza0xhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgIHRhc2tMYWJlbC5jbGFzc05hbWUgPSAnbXktMyB3LTUwJztcbiAgICAgIHRhc2tMYWJlbC5odG1sRm9yID0gdGFzay5pZDtcblxuICAgICAgdGFza0xhYmVsLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cImZvbnQtd2VpZ2h0LWJvbGRcIj5UYXNrIERlc2NyaXRpb246PC9zcGFuPiAke3Rhc2suaXRlbX08YnIvPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImZvbnQtd2VpZ2h0LWJvbGRcIj5UYXNrIERhdGU6PC9zcGFuPiAke3Rhc2suZGF0ZX08YnIvPiBcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJmb250LXdlaWdodC1ib2xkXCI+VGFzayBQcmlvcml0eTo8L3NwYW4+ICR7dGFzay5wcmlvcml0eX1gO1xuXG4gICAgICB0YXNrTGFiZWwuYXBwZW5kQ2hpbGQodGFza0NoZWNrQm94KTtcbiAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza0xhYmVsKTtcbiAgICAgIHRhc2tMaXN0LmFwcGVuZENoaWxkKHRhc2tEaXYpO1xuICAgIH0pO1xuICB9XG59O1xuXG4vLyBDbGVhciBwcm9qZWN0c1xuY29uc3QgY2xlYXJQcm9qZWN0ID0gKGVsZW1lbnQpID0+IHtcbiAgd2hpbGUgKGVsZW1lbnQuY2hpbGROb2Rlc1syXSkge1xuICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5jaGlsZE5vZGVzWzJdKTtcbiAgfVxufTtcblxuLy8gQ2xlYXIgdGFza3NcbmNvbnN0IGNsZWFyVGFzayA9IChlbGVtZW50KSA9PiB7XG4gIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gIH1cbn07XG5cbi8vIERlbGV0ZSBwcm9qZWN0XG5jb25zdCBkZWxldGVQcm9qZWN0ID0gKGlkKSA9PiB7XG4gIGxpc3RPZlByb2plY3RzID0gbGlzdE9mUHJvamVjdHMuZmlsdGVyKChwcm9qZWN0KSA9PiBwcm9qZWN0LmlkICE9PSBpZCk7XG5cbiAgdGFza1RpdGxlLnRleHRDb250ZW50ID0gJ1NlbGVjdCBvciBDcmVhdGUgYSBuZXcgcHJvamVjdCc7XG4gIHRhc2tDb3VudGVyLnRleHRDb250ZW50ID0gbnVsbDtcbiAgYWRkVG9Mb2NhbFN0b3JhZ2UobGlzdE9mUHJvamVjdHMpO1xufTtcblxuLy8gc2VsZWN0IHByb2plY3QgbGlzdFxucHJvamVjdExpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICBzZWxlY3RlZFByb2plY3RJZCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcbiAgYWRkU2VsZWN0ZWRQcm9qZWN0KHNlbGVjdGVkUHJvamVjdElkKTtcblxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWxldGVfcHJvamVjdCcpKSB7XG4gICAgZGVsZXRlUHJvamVjdChlLnRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKSk7XG4gICAgZGVmYXVsdFByb2plY3QuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH1cbn0pO1xuXG4vLyBUYXNrIGxpc3QgY2hlY2tib3ggYWRkRXZlbnRMaXN0ZW5lclxudGFza0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICBpZiAoZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRQcm9qZWN0ID0gbGlzdE9mUHJvamVjdHMuZmluZCgocHJvamVjdCkgPT4gcHJvamVjdC5pZCA9PT0gc2VsZWN0ZWRQcm9qZWN0SWQpO1xuICAgIGNvbnN0IHNlbGVjdGVkVGFzayA9IHNlbGVjdGVkUHJvamVjdC50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09PSBlLnRhcmdldC5pZCk7XG4gICAgc2VsZWN0ZWRUYXNrLmNvbXBsZXRlID0gZS50YXJnZXQuY2hlY2tlZDtcbiAgICBhZGRUb0xvY2FsU3RvcmFnZShsaXN0T2ZQcm9qZWN0cyk7XG4gICAgYWRkU2VsZWN0ZWRQcm9qZWN0KHNlbGVjdGVkUHJvamVjdElkKTtcbiAgICBjcmVhdGVUYXNrQ291bnQoc2VsZWN0ZWRQcm9qZWN0KTtcbiAgfVxufSk7XG5cbi8vIEFkZCBuZXcgdGFzayBidXR0b25cbmFkZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICBlLnRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB0YXNrRm9ybS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrTGlzdCk7XG59KTtcblxuLy8gQ2FuY2VsIHRhc2sgYnV0dG9uXG5jYW5jZWxUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB0YXNrRm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBhZGRUYXNrQnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB0YXNrRm9ybS5yZXNldCgpO1xufSk7XG5cbmNvbnN0IGNyZWF0ZSA9ICgpID0+IHtcbiAgY2xlYXJQcm9qZWN0KHByb2plY3RMaXN0KTtcbiAgY2xlYXJUYXNrKHRhc2tEaXYpO1xuICBjcmVhdGVQcm9qZWN0KCk7XG4gIGNyZWF0ZVRhc2tzKCk7XG59O1xuXG5jb25zdCBnZXRGcm9tTG9jYWxTdG9yYWdlID0gKCkgPT4ge1xuICBjb25zdCByZWZlcmVuY2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGlzdE9mUHJvamVjdHMnKTtcbiAgY29uc3Qgc2VsZWN0ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VsZWN0ZWRQcm9qZWN0SWQnKTtcblxuICBpZiAocmVmZXJlbmNlKSB7XG4gICAgbGlzdE9mUHJvamVjdHMgPSBKU09OLnBhcnNlKHJlZmVyZW5jZSk7XG4gICAgY3JlYXRlKCk7XG4gIH1cblxuICBpZiAoc2VsZWN0ZWQpIHtcbiAgICBzZWxlY3RlZFByb2plY3RJZCA9IEpTT04ucGFyc2Uoc2VsZWN0ZWQpO1xuICAgIGNyZWF0ZSgpO1xuICB9XG59O1xuXG5nZXRGcm9tTG9jYWxTdG9yYWdlKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZTsiLCJpbXBvcnQgY3JlYXRlIGZyb20gJy4vbW9kdWxlcy9wcm9qZWN0JztcblxuY3JlYXRlKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==